<div *ngIf="!isConfigurationDone()">
  <app-configuration></app-configuration>
</div>
<div *ngIf="isConfigurationDone()">
  <div (mousedown)="resetInputBox()">
    <div id="loader" *ngIf="isConfigurationDone() && configurationService.grid===undefined"></div>

    <div id="definitions" (mousedown)="resetInputBox()">
      <button id="CheatButton" (click)="changeMode()"> Cheat mode </button>
      <h2 id="title">Definitions</h2>
      <div *ngIf="configurationService.grid !== undefined">
        <h3> Horizontal : </h3>
        <div *ngFor="let word of configurationService.grid.words">
          <li *ngIf="word.isHorizontal">{{word.definitionID}})
            <span [ngClass]="{ 
              selectedDefinition : getState(word)===1,
              foundDefinition : getState(word)===2,
              clearDefinition: getState(word)===0}">
              <div *ngIf="isInCheatMode" [style.background]="getPlayerColorForDefinition(word)" (mouseup)="setSelectedWord(word)">{{getWordValue(word)}}</div>
              <div id="textDefinition" *ngIf="!isInCheatMode" [style.background]="getPlayerColorForDefinition(word)" (mouseup)="setSelectedWord(word)">{{word.definition}}</div>
            </span>
          </li>
        </div>
        <h3> Vertical : </h3>
        <div *ngFor="let word of configurationService.grid.words">
          <li *ngIf="!word.isHorizontal">{{word.definitionID}})
            <span [ngClass]="{ 
              selectedDefinition : getState(word)===1,
              foundDefinition : getState(word)===2,
              clearDefinition: getState(word)===0}">
              <div *ngIf="isInCheatMode" [style.background]="getPlayerColorForDefinition(word)" (mouseup)="setSelectedWord(word)">{{getWordValue(word)}}</div>
              <div id="textDefinition" *ngIf="!isInCheatMode" [style.background]="getPlayerColorForDefinition(word)" (mouseup)="setSelectedWord(word)">{{word.definition}}</div>
            </span>
          </li>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="isConfigurationDone()">
    <div id="gameInformations" (mousedown)="resetInputBox()">
      <h2 [style.background]="this.configurationService.currentPlayer.color"> {{configurationService.currentPlayer.name}} :
        <h4> {{configurationService.currentPlayer.score}} words found</h4>
      </h2>
      <h2 *ngIf="configurationService.isTwoPlayerGame" id="secondPlayer" [style.background]="this.configurationService.otherPlayer.color">
        {{configurationService.otherPlayer.name}} :
        <h4> {{configurationService.otherPlayer.score}} words found</h4>
      </h2>
    </div>
  </div>

  <div *ngIf="isConfigurationDone()">
    <div id="grid">
      <div *ngIf="configurationService.grid !== undefined">
        <div *ngFor="let line of configurationService.grid.boxes">
          <div *ngFor="let gridBox of line" (mouseup)="setSelectedWordOfBox(gridBox)">
            <div (mousedown)="resetInputBox()" [ngClass]="{
              filledGridBox : gridBox.isBlack, 
              selectedGridBox: this.playersSelectedBox(gridBox),
              inputGridBox: gridBox===getMySelectedGridBox(),
              emptyGridBox : !gridBox.isBlack
            }" [style.border-color]="getPlayerBorderColorForBox(gridBox)" [style.background]="getPlayerColorForBox(gridBox)"
              [style.outline]="getPlayerOutlineColor(gridBox)">
              <div id="relative">
                <div *ngIf="gridBox.inputChar != undefined && gridBox.inputChar.value != undefined" class="userInputLetter">{{gridBox.inputChar.value}}</div>
                <div class="definitionID">{{getGridBoxID(gridBox)}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>